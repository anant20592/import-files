(this.webpackJsonpcsvimport=this.webpackJsonpcsvimport||[]).push([[0],{33:function(t,e,n){},34:function(t,e,n){},58:function(t,e,n){"use strict";n.r(e);var c=n(0),i=n.n(c),o=n(24),s=n.n(o),a=(n(33),n(27)),r=n(7),l=(n(34),n(26)),d=n(12),u=n(28),j=n(10),f=n.n(j),O=n(25),b=n(2);var _=function(t){return Object(b.jsx)("div",{children:t.fileList.length>0?Object(b.jsxs)(O.a,{striped:!0,bordered:!0,hover:!0,children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"#"}),Object(b.jsxs)("th",{children:["File Name",Object(b.jsx)("i",{class:"fa fa-fw fa-sort-up",style:{position:"absolute"},onClick:function(){return t.sort("file_name","asc")}}),Object(b.jsx)("i",{class:"fa fa-fw fa-sort-down",onClick:function(){return t.sort("file_name","desc")}})]}),Object(b.jsxs)("th",{children:["Date uploaded",Object(b.jsx)("i",{class:"fa fa-fw fa-sort-up",style:{position:"absolute"},onClick:function(){return t.sort("date_uploaded","asc")}}),Object(b.jsx)("i",{class:"fa fa-fw fa-sort-down",onClick:function(){return t.sort("date_uploaded","desc")}})]}),Object(b.jsxs)("th",{children:["Status",Object(b.jsx)("i",{class:"fa fa-fw fa-sort-up",style:{position:"absolute"},onClick:function(){return t.sort("status","asc")}}),Object(b.jsx)("i",{class:"fa fa-fw fa-sort-down",onClick:function(){return t.sort("status","desc")}})]})]})}),Object(b.jsx)("tbody",{children:t.fileList.map((function(e,n){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:n+1}),Object(b.jsx)("td",{children:e.file_name}),Object(b.jsx)("td",{children:e.date_uploaded}),Object(b.jsx)("td",{children:t.status[e._id]?t.status[e._id]:e.status}),Object(b.jsx)("td",{children:e.file_content?e.file_content.length>0?e.file_content.map((function(t){return Object(b.jsxs)("div",{children:[t._id,"  ",t.total]},t._id)})):Object(b.jsx)("button",{onClick:function(){return t.getFileContent(e._id)},children:"View Data"}):Object(b.jsx)("button",{children:"View Data"})})]},e._id)}))})]}):null})};var S=function(){var t=Object(c.useState)(""),e=Object(r.a)(t,2),n=e[0],i=e[1],o=Object(c.useState)([]),s=Object(r.a)(o,2),j=s[0],O=s[1],S=Object(c.useState)(!1),h=Object(r.a)(S,2),p=h[0],v=h[1],x=Object(c.useState)(""),C=Object(r.a)(x,2),E=C[0],T=C[1],g=Object(c.useState)({}),m=Object(r.a)(g,2),D=m[0],F=m[1];function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"date_uploaded",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="files?field=".concat(t,"&val=").concat(e);return f.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL/n)}return Object(c.useEffect)((function(){(R().then((function(t){console.log("===== File List ======  ",t.data),O(t.data)})),p)||(new EventSource(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL/"poll-status").onmessage=function(t){var e=JSON.parse(t.data);console.log("parseddd== ",e.data),F(e.data)});v(!0)}),[]),Object(b.jsxs)(l.a,{children:[Object(b.jsx)("div",{style:{marginTop:"3%"},children:Object(b.jsx)("h3",{children:"Import CSV file"})}),Object(b.jsx)("div",{children:Object(b.jsxs)(d.a,{onSubmit:function(t){return function(t){if(t.preventDefault(),n){if("csv"!==n.name.split(".").pop().toLowerCase())return T("Invalid file format"),void i("");if(n.size>5e6)return T("File size too big"),void i("");var e=new FormData;e.append("myFile",n,n.name),console.log(n),f.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL,"/save"),e).then((function(t){console.log("save",t),t.data.success&&O([].concat(Object(a.a)(j),[t.data.data]))})),i("")}else T("Please select a file")}(t)},children:[Object(b.jsx)(d.a.Group,{children:Object(b.jsx)(d.a.File,{id:"custom-file",onChange:function(t){return e=t,T(""),console.log(e.target.files[0]),void i(e.target.files[0]);var e},onClick:function(t){t.target.value=null},label:n?n.name:"Upload file(upto 5MB size)",custom:!0})}),Object(b.jsx)("span",{children:E}),Object(b.jsx)("br",{}),Object(b.jsx)(u.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(b.jsx)("br",{}),Object(b.jsx)(_,{fileList:j,getFileContent:function(t){return function(t){f.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL,"/file-content/").concat(t)).then((function(e){if(console.log("file content --- ",e),e.data.success){var n=j.map((function(n){return n._id===t&&(n.file_content=e.data.data),n}));O(n)}}))}(t)},status:D,sort:function(t,e){return function(t,e){R(t,"asc"==e?1:-1).then((function(t){O(t.data)}))}(t,e)}})]})},h=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,o=e.getLCP,s=e.getTTFB;n(t),c(t),i(t),o(t),s(t)}))};n(57);s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root")),h()}},[[58,1,2]]]);
//# sourceMappingURL=main.067ba897.chunk.js.map