(this.webpackJsonpcsvimport=this.webpackJsonpcsvimport||[]).push([[0],{33:function(t,e,n){},34:function(t,e,n){},58:function(t,e,n){"use strict";n.r(e);var c=n(0),s=n.n(c),i=n(24),a=n.n(i),o=(n(33),n(27)),r=n(7),l=(n(34),n(26)),u=n(12),d=n(28),j=n(10),f=n.n(j),b=n(25),h=n(2);var p=function(t){return Object(h.jsx)("div",{children:t.fileList.length>0?Object(h.jsxs)(b.a,{striped:!0,bordered:!0,hover:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsxs)("th",{children:["File Name",Object(h.jsx)("i",{class:"fa fa-fw fa-sort-up",style:{position:"absolute"},onClick:function(){return t.sort("file_name","asc")}}),Object(h.jsx)("i",{class:"fa fa-fw fa-sort-down",onClick:function(){return t.sort("file_name","desc")}})]}),Object(h.jsxs)("th",{children:["Date uploaded",Object(h.jsx)("i",{class:"fa fa-fw fa-sort-up",style:{position:"absolute"},onClick:function(){return t.sort("date_uploaded","asc")}}),Object(h.jsx)("i",{class:"fa fa-fw fa-sort-down",onClick:function(){return t.sort("date_uploaded","desc")}})]}),Object(h.jsxs)("th",{children:["Status",Object(h.jsx)("i",{class:"fa fa-fw fa-sort-up",style:{position:"absolute"},onClick:function(){return t.sort("status","asc")}}),Object(h.jsx)("i",{class:"fa fa-fw fa-sort-down",onClick:function(){return t.sort("status","desc")}})]})]})}),Object(h.jsx)("tbody",{children:t.fileList.map((function(e,n){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:n+1}),Object(h.jsx)("td",{children:e.file_name}),Object(h.jsx)("td",{children:e.date_uploaded}),Object(h.jsx)("td",{children:t.status[e._id]?t.status[e._id]:e.status}),Object(h.jsx)("td",{children:e.file_content?e.file_content.length>0?e.file_content.map((function(t){return Object(h.jsxs)("div",{children:[t._id,"  ",t.total]},t._id)})):Object(h.jsx)("button",{onClick:function(){return t.getFileContent(e._id)},children:"View Data"}):Object(h.jsx)("button",{children:"View Data"})})]},e._id)}))})]}):null})};var O=function(){var t=Object(c.useState)(""),e=Object(r.a)(t,2),n=e[0],s=e[1],i=Object(c.useState)([]),a=Object(r.a)(i,2),j=a[0],b=a[1],O=Object(c.useState)(!1),x=Object(r.a)(O,2),v=x[0],m=x[1],g=Object(c.useState)(""),_=Object(r.a)(g,2),w=_[0],C=_[1],k=Object(c.useState)({}),S=Object(r.a)(k,2),F=S[0],y=S[1];function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"date_uploaded",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return f.a.get("https://csv-import-140621.herokuapp.com/files?field=".concat(t,"&val=").concat(e))}return Object(c.useEffect)((function(){(L().then((function(t){console.log("===== File List ======  ",t.data),b(t.data)})),v)||(new EventSource("https://csv-import-140621.herokuapp.com/poll-status").onmessage=function(t){var e=JSON.parse(t.data);console.log("parseddd== ",e.data),y(e.data)});m(!0)}),[]),Object(h.jsxs)(l.a,{children:[Object(h.jsx)("div",{style:{marginTop:"3%"},children:Object(h.jsx)("h3",{children:"Import CSV file"})}),Object(h.jsx)("div",{children:Object(h.jsxs)(u.a,{onSubmit:function(t){return function(t){if(t.preventDefault(),n){if("csv"!==n.name.split(".").pop().toLowerCase())return C("Invalid file format"),void s("");if(n.size>5e6)return C("File size too big"),void s("");var e=new FormData;e.append("myFile",n,n.name),console.log(n),f.a.post("https://csv-import-140621.herokuapp.com/save",e).then((function(t){console.log("save",t),t.data.success&&b([].concat(Object(o.a)(j),[t.data.data]))})),s("")}else C("Please select a file")}(t)},children:[Object(h.jsx)(u.a.Group,{children:Object(h.jsx)(u.a.File,{id:"custom-file",onChange:function(t){return e=t,C(""),console.log(e.target.files[0]),void s(e.target.files[0]);var e},onClick:function(t){t.target.value=null},label:n?n.name:"Upload file(upto 5MB size)",custom:!0})}),Object(h.jsx)("span",{children:w}),Object(h.jsx)("br",{}),Object(h.jsx)(d.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(h.jsx)("br",{}),Object(h.jsx)(p,{fileList:j,getFileContent:function(t){return function(t){f.a.get("https://csv-import-140621.herokuapp.com/file-content/".concat(t)).then((function(e){if(console.log("file content --- ",e),e.data.success){var n=j.map((function(n){return n._id===t&&(n.file_content=e.data.data),n}));b(n)}}))}(t)},status:F,sort:function(t,e){return function(t,e){L(t,"asc"==e?1:-1).then((function(t){b(t.data)}))}(t,e)}})]})},x=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),c(t),s(t),i(t),a(t)}))};n(57);a.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(O,{})}),document.getElementById("root")),x()}},[[58,1,2]]]);
//# sourceMappingURL=main.4638cac4.chunk.js.map